var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function s(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function l(t,e){t.appendChild(e)}function r(t,e,n){t.insertBefore(e,n||null)}function c(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function p(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function m(t){return function(e){return e.preventDefault(),t.call(this,e)}}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function h(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e){t.value=null==e?"":e}function v(t,e,n){t.classList[n?"add":"remove"](e)}let $;function w(t){$=t}function k(){if(!$)throw new Error("Function called outside component initialization");return $}function b(t){k().$$.on_mount.push(t)}function x(){const t=k();return(e,n)=>{const o=t.$$.callbacks[e];if(o){const s=function(t,e,n=!1){const o=document.createEvent("CustomEvent");return o.initCustomEvent(t,n,!1,e),o}(e,n);o.slice().forEach((e=>{e.call(t,s)}))}}}const S=[],_=[],C=[],O=[],T=Promise.resolve();let E=!1;function j(t){C.push(t)}const L=new Set;let P=0;function M(){const t=$;do{for(;P<S.length;){const t=S[P];P++,w(t),A(t.$$)}for(w(null),S.length=0,P=0;_.length;)_.pop()();for(let t=0;t<C.length;t+=1){const e=C[t];L.has(e)||(L.add(e),e())}C.length=0}while(S.length);for(;O.length;)O.pop()();E=!1,L.clear(),w(t)}function A(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(j)}}const N=new Set;let D;function I(){D={r:0,c:[],p:D}}function q(){D.r||o(D.c),D=D.p}function z(t,e){t&&t.i&&(N.delete(t),t.i(e))}function J(t,e,n,o){if(t&&t.o){if(N.has(t))return;N.add(t),D.c.push((()=>{N.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function B(t,e){t.d(1),e.delete(t.key)}function H(t,e,n,o,s,a,i,l,r,c,u,d){let f=t.length,p=a.length,m=f;const g={};for(;m--;)g[t[m].key]=m;const h=[],y=new Map,v=new Map;for(m=p;m--;){const t=d(s,a,m),l=n(t);let r=i.get(l);r?o&&r.p(t,e):(r=c(l,t),r.c()),y.set(l,h[m]=r),l in g&&v.set(l,Math.abs(m-g[l]))}const $=new Set,w=new Set;function k(t){z(t,1),t.m(l,u),i.set(t.key,t),u=t.first,p--}for(;f&&p;){const e=h[p-1],n=t[f-1],o=e.key,s=n.key;e===n?(u=e.first,f--,p--):y.has(s)?!i.has(o)||$.has(o)?k(e):w.has(s)?f--:v.get(o)>v.get(s)?(w.add(o),k(e)):($.add(s),f--):(r(n,i),f--)}for(;f--;){const e=t[f];y.has(e.key)||r(e,i)}for(;p;)k(h[p-1]);return h}function W(t){t&&t.c()}function U(t,n,a,i){const{fragment:l,on_mount:r,on_destroy:c,after_update:u}=t.$$;l&&l.m(n,a),i||j((()=>{const n=r.map(e).filter(s);c?c.push(...n):o(n),t.$$.on_mount=[]})),u.forEach(j)}function F(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function G(t,e){-1===t.$$.dirty[0]&&(S.push(t),E||(E=!0,T.then(M)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function K(e,s,a,i,l,r,u,d=[-1]){const f=$;w(e);const p=e.$$={fragment:null,ctx:null,props:r,update:t,not_equal:l,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(s.context||(f?f.$$.context:[])),callbacks:n(),dirty:d,skip_bound:!1,root:s.target||f.$$.root};u&&u(p.root);let m=!1;if(p.ctx=a?a(e,s.props||{},((t,n,...o)=>{const s=o.length?o[0]:n;return p.ctx&&l(p.ctx[t],p.ctx[t]=s)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](s),m&&G(e,t)),n})):[],p.update(),m=!0,o(p.before_update),p.fragment=!!i&&i(p.ctx),s.target){if(s.hydrate){const t=function(t){return Array.from(t.childNodes)}(s.target);p.fragment&&p.fragment.l(t),t.forEach(c)}else p.fragment&&p.fragment.c();s.intro&&z(e.$$.fragment),U(e,s.target,s.anchor,s.customElement),M()}w(f)}class Q{$destroy(){F(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const R=[];function V(e,n=t){let o;const s=new Set;function i(t){if(a(e,t)&&(e=t,o)){const t=!R.length;for(const t of s)t[1](),R.push(t,e);if(t){for(let t=0;t<R.length;t+=2)R[t][0](R[t+1]);R.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(a,l=t){const r=[a,l];return s.add(r),1===s.size&&(o=n(i)||t),a(e),()=>{s.delete(r),0===s.size&&(o(),o=null)}}}}const X={state:"loggedout",username:null,userid:null,authtoken:null},Y=V(X),Z={subscribe:Y.subscribe,appStarted:()=>{const t=localStorage.getItem("todo-auth-state");if(t){let e=JSON.parse(t);e={...e,state:"loggedin"},Y.set(e)}},setLoggedOff:()=>{Y.set(X),localStorage.removeItem("todo-auth-state")},setSignup:()=>{const t={...X,state:"signup"};Y.set(t)},setLogin:()=>{const t={...X,state:"login"};Y.set(t)},setLoggedIn:(t,e,n)=>{Y.set({state:"loggedin",username:t,userid:e,authtoken:n}),localStorage.setItem("todo-auth-state",JSON.stringify({username:t,userid:e,authtoken:n}))}};function tt(e){let n,s,a,i,d,h,y;return{c(){n=u("li"),s=u("a"),s.textContent="Login",a=f(),i=u("li"),d=u("a"),d.textContent="Signup",g(s,"href","/"),g(s,"class","button svelte-1ayo5vy"),g(n,"class","svelte-1ayo5vy"),g(d,"href","/"),g(d,"class","button svelte-1ayo5vy"),g(i,"class","svelte-1ayo5vy")},m(t,o){r(t,n,o),l(n,s),r(t,a,o),r(t,i,o),l(i,d),h||(y=[p(s,"click",m(e[2])),p(d,"click",m(e[3]))],h=!0)},p:t,d(t){t&&c(n),t&&c(a),t&&c(i),h=!1,o(y)}}}function et(t){let e,n,o,s,a,i,y,v,$,w=t[0].username+"";return{c(){e=u("li"),n=d(w),o=f(),s=u("li"),s.innerHTML='<a href="#" class="svelte-1ayo5vy">About</a>',a=f(),i=u("li"),y=u("a"),y.textContent="Logout",g(e,"class","svelte-1ayo5vy"),g(s,"class","svelte-1ayo5vy"),g(y,"href","/"),g(y,"class","svelte-1ayo5vy"),g(i,"class","svelte-1ayo5vy")},m(c,u){r(c,e,u),l(e,n),r(c,o,u),r(c,s,u),r(c,a,u),r(c,i,u),l(i,y),v||($=p(y,"click",m(t[1])),v=!0)},p(t,e){1&e&&w!==(w=t[0].username+"")&&h(n,w)},d(t){t&&c(e),t&&c(o),t&&c(s),t&&c(a),t&&c(i),v=!1,$()}}}function nt(e){let n,o,s,a,i;function d(t,e){return"loggedin"===t[0].state?et:tt}let p=d(e),m=p(e);return{c(){n=u("header"),o=u("h1"),o.innerHTML='<span><span class="fas fa-tasks svelte-1ayo5vy" aria-hidden="true"></span> todopad</span>',s=f(),a=u("nav"),i=u("ul"),m.c(),g(o,"class","svelte-1ayo5vy"),g(i,"class","svelte-1ayo5vy"),g(a,"class","svelte-1ayo5vy"),g(n,"class","svelte-1ayo5vy")},m(t,e){r(t,n,e),l(n,o),l(n,s),l(n,a),l(a,i),m.m(i,null)},p(t,[e]){p===(p=d(t))&&m?m.p(t,e):(m.d(1),m=p(t),m&&(m.c(),m.m(i,null)))},i:t,o:t,d(t){t&&c(n),m.d()}}}function ot(t,e,n){let o;i(t,Z,(t=>n(0,o=t)));return[o,()=>Z.setLoggedOff(),()=>Z.setLogin(),()=>Z.setSignup()]}class st extends Q{constructor(t){super(),K(this,t,ot,nt,a,{})}}async function at(t,e){if("pending"===e){return it(t,"/todo?pending=true")}if("today"===e){const e=new Date;e.setHours(0,0,0,0);const n=new Date;n.setHours(23,59,59,999);return it(t,`/todo?from=${e.toISOString()}&to=${n.toISOString()}`)}throw`unknown todo filter ${e}`}async function it(t,e){const n={method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`,Accept:"application/json",Origin:"http://127.0.0.1:5000"}},o=await fetch(e,n);if(!o.ok){const t=await o.text();throw console.log(t),t}return await o.json()}function lt(t){let e,n;return{c(){e=u("p"),n=d(t[4]),g(e,"class","error-message svelte-qk26dr")},m(t,o){r(t,e,o),l(e,n)},p(t,e){16&e&&h(n,t[4])},d(t){t&&c(e)}}}function rt(e){let n,o,s,a,i,m,y,$,w=e[6]&&lt(e);return{c(){n=u("div"),o=u("label"),s=d(e[1]),a=f(),i=u("input"),m=f(),w&&w.c(),g(o,"for",e[0]),g(o,"class","svelte-qk26dr"),g(i,"type",e[3]),g(i,"id",e[0]),i.value=e[2],g(i,"class","svelte-qk26dr"),v(i,"invalid",e[6]),g(n,"class","form-control svelte-qk26dr")},m(t,c){r(t,n,c),l(n,o),l(o,s),l(n,a),l(n,i),e[11](i),l(n,m),w&&w.m(n,null),y||($=p(i,"input",e[7]),y=!0)},p(t,[e]){2&e&&h(s,t[1]),1&e&&g(o,"for",t[0]),8&e&&g(i,"type",t[3]),1&e&&g(i,"id",t[0]),4&e&&i.value!==t[2]&&(i.value=t[2]),64&e&&v(i,"invalid",t[6]),t[6]?w?w.p(t,e):(w=lt(t),w.c(),w.m(n,null)):w&&(w.d(1),w=null)},i:t,o:t,d(t){t&&c(n),e[11](null),w&&w.d(),y=!1,$()}}}function ct(t,e,n){let o;const s=x();let a,{id:i}=e,{label:l}=e,{value:r}=e,{type:c}=e,{autofocus:u=0}=e,{valid:d=!0}=e,{validityMessage:f=""}=e;b((()=>{u&&a.focus()}));let p=!1;return t.$$set=t=>{"id"in t&&n(0,i=t.id),"label"in t&&n(1,l=t.label),"value"in t&&n(2,r=t.value),"type"in t&&n(3,c=t.type),"autofocus"in t&&n(8,u=t.autofocus),"valid"in t&&n(9,d=t.valid),"validityMessage"in t&&n(4,f=t.validityMessage)},t.$$.update=()=>{1552&t.$$.dirty&&n(6,o=!d&&f&&p)},[i,l,r,c,f,a,o,function(t){n(10,p=!0),s("input",t)},u,d,p,function(t){_[t?"unshift":"push"]((()=>{a=t,n(5,a)}))}]}class ut extends Q{constructor(t){super(),K(this,t,ct,rt,a,{id:0,label:1,value:2,type:3,autofocus:8,valid:9,validityMessage:4})}}function dt(t){return 0===t.trim().length}function ft(t){return!/^((?!\.)[\w\-_.]*[^.])(@\w+)(\.\w+(\.\w+)?[^.\W])$/.test(t)}function pt(t){let e,n;return e=new ut({props:{id:"name",label:"Name",type:"text",value:t[1],valid:!dt(t[1]),validityMessage:"Please enter your name",autofocus:"true"}}),e.$on("input",t[9]),{c(){W(e.$$.fragment)},m(t,o){U(e,t,o),n=!0},p(t,n){const o={};2&n&&(o.value=t[1]),2&n&&(o.valid=!dt(t[1])),e.$set(o)},i(t){n||(z(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){F(e,t)}}}function mt(t){let e,n;return{c(){e=u("p"),n=d(t[4]),g(e,"class","error svelte-10w01ww")},m(t,o){r(t,e,o),l(e,n)},p(t,e){16&e&&h(n,t[4])},d(t){t&&c(e)}}}function gt(t){let e,n,s,a,i,h,y,v,$,w,k,b,x,S,_,C,O,T,E=t[0]&&pt(t);i=new ut({props:{id:"email",label:"Email",type:"email",value:t[2],valid:!ft(t[2]),validityMessage:"Please enter valid email",autofocus:!t[0]}}),i.$on("input",t[10]),y=new ut({props:{id:"password",label:"Password",type:"password",value:t[3],valid:!dt(t[3]),validityMessage:"Please enter your password"}}),y.$on("input",t[11]);let j=t[4]&&mt(t);return{c(){e=u("form"),n=u("h2"),n.textContent=`${t[6]}`,s=f(),E&&E.c(),a=f(),W(i.$$.fragment),h=f(),W(y.$$.fragment),v=f(),$=u("div"),w=u("button"),k=d(t[6]),x=f(),S=u("button"),S.textContent="Cancel",_=f(),j&&j.c(),g(n,"class","svelte-10w01ww"),w.disabled=b=!t[5](),g(w,"class","svelte-10w01ww"),g(S,"class","svelte-10w01ww"),g($,"class","controls svelte-10w01ww"),g(e,"class","svelte-10w01ww")},m(o,c){var u;r(o,e,c),l(e,n),l(e,s),E&&E.m(e,null),l(e,a),U(i,e,null),l(e,h),U(y,e,null),l(e,v),l(e,$),l($,w),l(w,k),l($,x),l($,S),l($,_),j&&j.m($,null),C=!0,O||(T=[p(w,"click",(u=m(t[8]),function(t){return t.stopPropagation(),u.call(this,t)})),p(S,"click",t[7])],O=!0)},p(t,[n]){t[0]?E?(E.p(t,n),1&n&&z(E,1)):(E=pt(t),E.c(),z(E,1),E.m(e,a)):E&&(I(),J(E,1,1,(()=>{E=null})),q());const o={};4&n&&(o.value=t[2]),4&n&&(o.valid=!ft(t[2])),1&n&&(o.autofocus=!t[0]),i.$set(o);const s={};8&n&&(s.value=t[3]),8&n&&(s.valid=!dt(t[3])),y.$set(s),(!C||32&n&&b!==(b=!t[5]()))&&(w.disabled=b),t[4]?j?j.p(t,n):(j=mt(t),j.c(),j.m($,null)):j&&(j.d(1),j=null)},i(t){C||(z(E),z(i.$$.fragment,t),z(y.$$.fragment,t),C=!0)},o(t){J(E),J(i.$$.fragment,t),J(y.$$.fragment,t),C=!1},d(t){t&&c(e),E&&E.d(),F(i),F(y),j&&j.d(),O=!1,o(T)}}}function ht(t,e,n){let o,{signup:s=!1}=e,a=s?"Signup":"Login",i="",l="",r="",c=null;return t.$$set=t=>{"signup"in t&&n(0,s=t.signup)},t.$$.update=()=>{15&t.$$.dirty&&n(5,o=()=>{let t=!dt(r)&&!ft(l);return s&&(t=t&&!dt(i)),t})},[s,i,l,r,c,o,a,function(){Z.setLoggedOff()},async function(){if(n(4,c=null),o())try{let t;t=s?await async function(t,e,n){const o={method:"POST",body:JSON.stringify({name:t,email:e,password:n}),headers:{"Content-Type":"application/json"}},s=await fetch("/signup",o);if(!s.ok){const t=await s.text();if(console.log(t),409===s.status)throw"Email already exists. Please login if you have registered already.";throw t}return await s.json()}(i,l,r):await async function(t,e){const n={method:"POST",body:JSON.stringify({email:t,password:e}),headers:{"Content-Type":"application/json"}},o=await fetch("/login",n);if(!o.ok){const t=await o.text();if(console.log(t),404===o.status)throw"Email not found. Please login with valid credentials.";if(403===o.status)throw"Invalid Credentials. Please login with valid credentials.";throw t}return await o.json()}(l,r),Z.setLoggedIn(t.name,t.userid,t.token)}catch(t){n(4,c=t)}else n(4,c="invalid form")},t=>n(1,i=t.detail.target.value),t=>n(2,l=t.detail.target.value),t=>n(3,r=t.detail.target.value)]}class yt extends Q{constructor(t){super(),K(this,t,ht,gt,a,{signup:0})}}const vt=V([]),$t={subscribe:vt.subscribe,set:t=>{vt.set(t)},add:t=>{vt.update((e=>[...e,t]))},toggleTodoDone:t=>{vt.update((e=>{let n={...e.find((e=>e.id===t))};n.done=!n.done;const o=e.findIndex((e=>e.id==t));let s=[...e];return s[o]=n,s}))},deleteTodo:t=>{vt.update((e=>e.filter((e=>e.id!==t))))}},wt=V({type:"pending",display:"Pending todos"}),kt={subscribe:wt.subscribe,setPending:()=>{wt.set({type:"pending",display:"todos pending"})},setToday:()=>{wt.set({type:"today",display:`todos for today (${(new Date).toDateString()})`})}};function bt(t,e,n){const o=t.slice();return o[20]=e[n],o}function xt(t,e,n){const o=t.slice();return o[17]=e[n],o}function St(t){let e,n;return{c(){e=u("p"),n=d(t[2]),g(e,"class","error svelte-1xmfof7")},m(t,o){r(t,e,o),l(e,n)},p(t,e){4&e&&h(n,t[2])},d(t){t&&c(e)}}}function _t(t){let e,n,o,s,a,i,p,m=t[4].length+"",y=t[3].display+"",v=[],$=new Map,w=t[4];const k=t=>t[20].id;for(let e=0;e<w.length;e+=1){let n=bt(t,w,e),o=k(n);$.set(o,v[e]=jt(o,n))}return{c(){e=u("div"),n=u("p"),o=d(m),s=f(),a=d(y),i=f(),p=u("ul");for(let t=0;t<v.length;t+=1)v[t].c();g(n,"class","summary svelte-1xmfof7"),g(p,"class","svelte-1xmfof7"),g(e,"class","todos svelte-1xmfof7")},m(t,c){r(t,e,c),l(e,n),l(n,o),l(n,s),l(n,a),l(e,i),l(e,p);for(let t=0;t<v.length;t+=1)v[t].m(p,null)},p(t,e){16&e&&m!==(m=t[4].length+"")&&h(o,m),8&e&&y!==(y=t[3].display+"")&&h(a,y),914&e&&(w=t[4],v=H(v,e,k,1,t,w,$,p,B,jt,null,bt))},d(t){t&&c(e);for(let t=0;t<v.length;t+=1)v[t].d()}}}function Ct(t){let e,n,o,s=[],a=new Map,i=t[5];const l=t=>t[17].key;for(let e=0;e<i.length;e+=1){let n=xt(t,i,e),o=l(n);a.set(o,s[e]=Lt(o,n))}return{c(){e=u("p"),e.textContent="Type the command and press enter key for the action:",n=f(),o=u("ul");for(let t=0;t<s.length;t+=1)s[t].c();g(e,"class","summary svelte-1xmfof7"),g(o,"class","command svelte-1xmfof7")},m(t,a){r(t,e,a),r(t,n,a),r(t,o,a);for(let t=0;t<s.length;t+=1)s[t].m(o,null)},p(t,e){32&e&&(i=t[5],s=H(s,e,l,1,t,i,a,o,B,Lt,null,xt))},d(t){t&&c(e),t&&c(n),t&&c(o);for(let t=0;t<s.length;t+=1)s[t].d()}}}function Ot(t){let e;return{c(){e=u("span"),g(e,"class","fas fa-check-square svelte-1xmfof7")},m(t,n){r(t,e,n)},d(t){t&&c(e)}}}function Tt(t){let e;return{c(){e=u("span"),g(e,"class","fas fa-square svelte-1xmfof7")},m(t,n){r(t,e,n)},d(t){t&&c(e)}}}function Et(t){let e,n,o,s;function a(){return t[12](t[20])}return{c(){e=u("span"),n=u("span"),g(n,"class","fas fa-trash svelte-1xmfof7"),g(e,"class","controls svelte-1xmfof7")},m(t,i){r(t,e,i),l(e,n),o||(s=p(n,"click",a),o=!0)},p(e,n){t=e},d(t){t&&c(e),o=!1,s()}}}function jt(t,e){let n,s,a,i,m,y,v,$,w,k=e[20].title+"";function b(t,e){return t[20].done?Ot:Tt}let x=b(e),S=x(e);function _(){return e[11](e[20])}let C=e[20].id===e[1]&&Et(e);function O(){return e[14](e[20])}function T(){return e[15](e[20])}return{key:t,first:null,c(){n=u("li"),s=u("span"),S.c(),a=f(),i=u("span"),m=d(k),y=f(),C&&C.c(),v=f(),g(s,"class","completed"),g(i,"class","title"),g(n,"class","svelte-1xmfof7"),this.first=n},m(t,o){r(t,n,o),l(n,s),S.m(s,null),l(n,a),l(n,i),l(i,m),l(n,y),C&&C.m(n,null),l(n,v),$||(w=[p(s,"click",_),p(n,"mouseleave",e[13]),p(n,"mouseover",O),p(n,"focus",T)],$=!0)},p(t,o){x!==(x=b(e=t))&&(S.d(1),S=x(e),S&&(S.c(),S.m(s,null))),16&o&&k!==(k=e[20].title+"")&&h(m,k),e[20].id===e[1]?C?C.p(e,o):(C=Et(e),C.c(),C.m(n,v)):C&&(C.d(1),C=null)},d(t){t&&c(n),S.d(),C&&C.d(),$=!1,o(w)}}}function Lt(t,e){let n,o,s,a,i,p,m,h=e[17].key+"",y=e[17].action+"";return{key:t,first:null,c(){n=u("li"),o=u("span"),s=d(h),a=d(" -\n          "),i=u("span"),p=d(y),m=f(),g(o,"class","command-key svelte-1xmfof7"),g(i,"class","command-action svelte-1xmfof7"),g(n,"class","svelte-1xmfof7"),this.first=n},m(t,e){r(t,n,e),l(n,o),l(o,s),l(n,a),l(n,i),l(i,p),l(n,m)},p(t,n){e=t},d(t){t&&c(n)}}}function Pt(e){let n,s,a,i,d,m,h,v,$=e[2]&&St(e);function w(t,e){return(null==m||1&e)&&(m=!!t[0].startsWith("?")),m?Ct:_t}let k=w(e,-1),b=k(e);return{c(){n=u("div"),s=u("div"),a=u("input"),i=f(),$&&$.c(),d=f(),b.c(),g(a,"placeholder","enter a todo (or) type ? to show possible commands"),g(a,"type","text"),a.autofocus=!0,g(a,"class","svelte-1xmfof7"),g(s,"class","todoinput svelte-1xmfof7"),g(n,"class","todoarea svelte-1xmfof7")},m(t,o){r(t,n,o),l(n,s),l(s,a),y(a,e[0]),l(n,i),$&&$.m(n,null),l(n,d),b.m(n,null),a.focus(),h||(v=[p(a,"input",e[10]),p(a,"keypress",e[6])],h=!0)},p(t,[e]){1&e&&a.value!==t[0]&&y(a,t[0]),t[2]?$?$.p(t,e):($=St(t),$.c(),$.m(n,d)):$&&($.d(1),$=null),k===(k=w(t,e))&&b?b.p(t,e):(b.d(1),b=k(t),b&&(b.c(),b.m(n,null)))},i:t,o:t,d(t){t&&c(n),$&&$.d(),b.d(),h=!1,o(v)}}}function Mt(t,e,n){let o,s,a;i(t,kt,(t=>n(3,o=t))),i(t,Z,(t=>n(16,s=t))),i(t,$t,(t=>n(4,a=t)));let l="",r=null,c=null;function u(t){n(1,r=t)}async function d(t){try{const e={...a.find((e=>e.id===t))};e.done=!e.done,await async function(t,e){const n={method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`,Accept:"application/json",Origin:"http://127.0.0.1:5000"},body:JSON.stringify(e)},o=`/todo/${e.id}`,s=await fetch(o,n);if(!s.ok){const t=await s.text();throw console.log(t),t}}(s.authtoken,e);const n=await at(s.authtoken,o.type);$t.set(n)}catch(t){n(2,c=t)}}async function f(t){try{await async function(t,e){const n={method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`,Accept:"application/json",Origin:"http://127.0.0.1:5000"}},o=`/todo/${e}`,s=await fetch(o,n);if(!s.ok){const t=await s.text();throw console.log(t),t}}(s.authtoken,t);const e=await at(s.authtoken,o.type);$t.set(e)}catch(t){n(2,c=t)}}b((async()=>{try{const t=await at(s.authtoken,o.type);$t.set(t)}catch(t){n(2,c=t)}}));return[l,r,c,o,a,[{key:"?pending",action:"show the pending todos"},{key:"?today",action:"show todos of today"},{key:"?yesterday",action:"show todos of yesterday"},{key:"?tomorrow",action:"show todos of tomorrow"},{key:"?this week",action:"show todos of this week"}],async function(t){if(n(2,c=null),13===t.keyCode&&(t.preventDefault(),0!==l.length)){if("?today"===l.trim()){try{kt.setToday();const t=await at(s.authtoken,o.type);$t.set(t)}catch(t){n(2,c=t)}return void n(0,l="")}if("?pending"===l.trim()){try{kt.setPending();const t=await at(s.authtoken,o.type);$t.set(t)}catch(t){n(2,c=t)}return void n(0,l="")}if(l.trim().startsWith("?"))return n(2,c=`command '${l}'' is not supported`),void n(0,l="");try{const t=await async function(t,e){const n={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`,Accept:"application/json",Origin:"http://127.0.0.1:5000"},body:JSON.stringify(e)},o=await fetch("/todo",n);if(!o.ok){const t=await o.text();throw console.log(t),t}return await o.json()}(s.authtoken,{title:l,effort:1,due:new Date,done:!1});$t.add(t)}catch(t){n(2,c=t)}n(0,l="")}},u,d,f,function(){l=this.value,n(0,l)},t=>d(t.id),t=>f(t.id),()=>n(1,r=null),t=>u(t.id),t=>u(t.id)]}class At extends Q{constructor(t){super(),K(this,t,Mt,Pt,a,{})}}function Nt(e){let n;return{c(){n=u("h1"),n.textContent="Unknown state"},m(t,e){r(t,n,e)},i:t,o:t,d(t){t&&c(n)}}}function Dt(t){let e,n;return e=new At({}),{c(){W(e.$$.fragment)},m(t,o){U(e,t,o),n=!0},i(t){n||(z(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){F(e,t)}}}function It(t){let e,n;return e=new yt({}),{c(){W(e.$$.fragment)},m(t,o){U(e,t,o),n=!0},i(t){n||(z(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){F(e,t)}}}function qt(t){let e,n;return e=new yt({props:{signup:!0}}),{c(){W(e.$$.fragment)},m(t,o){U(e,t,o),n=!0},i(t){n||(z(e.$$.fragment,t),n=!0)},o(t){J(e.$$.fragment,t),n=!1},d(t){F(e,t)}}}function zt(e){let n;return{c(){n=u("h1"),n.textContent="Signin please"},m(t,e){r(t,n,e)},i:t,o:t,d(t){t&&c(n)}}}function Jt(t){let e,n,o,s;const a=[zt,qt,It,Dt,Nt],i=[];function l(t,e){return"loggedout"===t[0].state?0:"signup"===t[0].state?1:"login"===t[0].state?2:"loggedin"===t[0].state?3:4}return n=l(t),o=i[n]=a[n](t),{c(){e=u("div"),o.c(),g(e,"class","main svelte-nay1ei")},m(t,o){r(t,e,o),i[n].m(e,null),s=!0},p(t,[s]){let r=n;n=l(t),n!==r&&(I(),J(i[r],1,1,(()=>{i[r]=null})),q(),o=i[n],o||(o=i[n]=a[n](t),o.c()),z(o,1),o.m(e,null))},i(t){s||(z(o),s=!0)},o(t){J(o),s=!1},d(t){t&&c(e),i[n].d()}}}function Bt(t,e,n){let o;return i(t,Z,(t=>n(0,o=t))),[o]}class Ht extends Q{constructor(t){super(),K(this,t,Bt,Jt,a,{})}}function Wt(e){let n,o,s,a,i;return o=new st({}),a=new Ht({}),{c(){n=u("div"),W(o.$$.fragment),s=f(),W(a.$$.fragment)},m(t,e){r(t,n,e),U(o,n,null),l(n,s),U(a,n,null),i=!0},p:t,i(t){i||(z(o.$$.fragment,t),z(a.$$.fragment,t),i=!0)},o(t){J(o.$$.fragment,t),J(a.$$.fragment,t),i=!1},d(t){t&&c(n),F(o),F(a)}}}function Ut(t){return Z.appStarted(),[]}return new class extends Q{constructor(t){super(),K(this,t,Ut,Wt,a,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
