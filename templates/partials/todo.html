<li id="todo-{{ todo.id }}" class="group flex py-2 px-1 hover:bg-gray-100 justify-between">
    <div class="flex items-center gap-3">
        <input
            id="completed-{{todo.id}}"
            type="checkbox"
            {% if todo.completed %}checked{% endif %}
            hx-post="/todos/{{ todo.id }}/toggle"
            hx-trigger="change"
            hx-on::after-request="
            if (event.detail.successful) {
                let filter = document.getElementById('filter').value;
                if (filter === 'pending') { 
                    document.getElementById('todo-{{ todo.id }}').remove();
                } 
            }"
            class="cursor-pointer"
        >
        
        <a 
            href="/todos/{{ todo.id }}" 
            class="cursor-pointer text-black"
        >
            {{ todo.title }}
        </a>
    </div>

    
    <div class="flex flex-row items-center justify-center gap-2">
        <div class="hidden md:group-hover:flex gap-2 justify-center">
            {% if todo.extract_links().len() != 0 %}
            <span 
                x-data="{ showTooltip: false }" 
                @mouseenter="showTooltip = true" 
                @mouseleave="showTooltip = false"
                class="cursor-pointer relative"
            >
                <i class="fa-solid fa-link"></i>

                <div x-show="showTooltip"
                    @click="showTooltip = false"
                    class="text-sm text-white absolute bg-gray-500 rounded-lg 
                            p-2 w-max z-10 shadow-lg"
                >
                    {% for link in todo.extract_links() %}
                        <a href="{{ link }}" target="_blank" class="block text-blue-200 hover:text-white p-2">
                            {{ link }}
                        </a>
                    {% endfor %}
                </div>
            </span>
            {% endif %}

            <span 
                x-data="{ showTooltip: false }" 
                @mouseenter="showTooltip = true" 
                @mouseleave="showTooltip = false"
                hx-get="/todos/{{ todo.id }}/tags" 
                hx-trigger="mouseenter once" 
                hx-target="#tooltip-content-{{ todo.id }}"
                hx-on::after-request="formatTags('{{ todo.id }}')"
                class="cursor-pointer"
            >
                <i class="fas fa-tag"></i>

                <div x-show="showTooltip"
                        class="text-sm text-white absolute bg-gray-500 rounded-lg 
                            p-2 transform translate-y-2 translate-x-2"
                >
                    <div id="tooltip-content-{{ todo.id }}">Loading...</div>
                </div>
            </span>

            <span 
                class="cursor-pointer"
                hx-delete="/todos/{{ todo.id }}"
                hx-target="#todo-{{ todo.id }}"
                hx-swap="outerHTML"
            >
                <i class="fa-solid fa-trash"></i>
            </span>
        </div> 

        {% if show_date %}
        <span class="inline-flex whitespace-nowrap text-xs font-thin px-2 py-1 bg-white text-gray-500
                    border border-gray-500 rounded-full w-auto">
            {{todo.relative_due(timezone.as_str())}}
        </span>
        {% endif %}
    </div>
</li>

            
